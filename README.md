# News_Bot
## News Bot Server

**News Bot** is an intelligent platform for news aggregation and summarization. The service saves users from having to read dozens of long articles by providing concise summaries generated by AI.

The project is built on a microservice architecture, combining the high performance of FastAPI with the power of modern NLP models.

## üöÄ Key Features
*   **Intelligent Scraping:** Automatic news parsing from multiple sources (RSS, HTML) every 30 minutes.
*   **Neural Network Summarization:** A dedicated ML microservice processes full article texts and returns a concise summary.
*   **Personalization:** Users can subscribe to specific sources and form a custom feed.
*   **Flexible Filtering:** Search and filter news by sources, topics, time periods, and headlines.
*   **Security:** Registration with Email verification, JWT-based authentication (Access & Refresh tokens).
*   **Manual Trigger:** Ability to initiate news synchronization upon user request.

## üõ† Tech Stack
*   **Backend:** FastAPI (Python 3.12)
*   **Database:** PostgreSQL + SQLAlchemy (Async)
*   **Migrations:** Alembic
*   **Task Queue:** Celery + Celery Beat
*   **Message Broker:** Redis
*   **ML/NLP:** Transformers, PyTorch/ONNX (within the ML microservice)
*   **DevOps:** Docker, Docker Compose
*   **Logging:** Structured logging (Rotating files & Console)

## Database Schema
<img width="1061" height="681" alt="News_Bot_ER_diagram drawio" src="https://github.com/user-attachments/assets/85126cf9-171c-45ee-81ae-b21eebfa014f" />


## ‚öôÔ∏è How it works (Pipeline)
1.  **Scheduler (Celery Beat):** Triggers a task to scan sources every 30 minutes.
2.  **Parser (Worker):** Extracts data from news sites using multithreading and filters out duplicates.
3.  **Intelligence (ML Service):** The article text is sent to the microservice, where the summarization model generates a brief summary.
4.  **Storage:** The processed article (title, original text, summary, image link) is saved in the database and becomes available to users.


## Developers:

 - **Vitali Minkouski** - Backend Developer
 - **Oleg Reynvald** - ML Developer


## System Requirements

- **Git**
- **Docker** (Docker Engine)
- **Docker Compose**

You don't need to set up a local Python environment to run the application via Docker.


## API Setup Instructions

### 1. Clone the project

### 2. Set up environment variables

The project uses a root `.env` file for Docker Compose.

Create a file named `.env` in the project root (`News_Bot`) and request the credentials to fill this file from the developers.

### 3. Run the entire project using Docker

Run the commands from the project root (`News_Bot`):

### 4. Stop any previously running stack (optional but recommended)

docker compose down || docker-compose down
### 5. Build and run all services in the background

docker compose up --build -d
This action will:

- Build the backend image from `news_bot_backend/Dockerfile`
- Build the ML microservice image from `ml_service/Dockerfile`
- Start:
  - `postgres` (PostgreSQL)
  - `redis`
  - `ml-service` (ML microservice)
  - `api` (FastAPI backend)
  - `worker` (Celery worker)
  - `beat` (Celery beat scheduler)



## Accessing the Services

- **Backend API (FastAPI)**:  
  `http://localhost:8000`
- **API docs (Swagger UI)**:  
  `http://localhost:8000/docs`
- **ML Microservice**:  
  `http://localhost:8100`
- **PostgreSQL** (from host):  
  - Host: `localhost`
  - Port: `5433`
  - Database: `newsbot`
  - User: `newsbot_admin`
  - Password: value from `POSTGRES_PASSWORD` in `.env`
- **Redis** (from host):  
  - Host: `localhost`
  - Port: `6379`



## Working with Swagger UI

Swagger UI is an interactive API documentation, available at `http://localhost:8000/docs` after the services are launched.

### Opening Swagger UI

1. Ensure all services are running (`docker compose ps`)
2. Open in your browser: `http://localhost:8000/docs`
3. You will see a list of all available endpoints grouped by tags (Authentication, profile, articles, etc.)

### Authentication in Swagger

Authentication is required to work with protected endpoints. Two methods are available:

#### Method 1: Authorization via OAuth2 (Recommended)

1. Click the **"Authorize"** button in the top right corner of Swagger UI
2. In the opened window, select **"OAuth2PasswordBearer"**
3. Enter:
   - **username**: your login or email
   - **password**: your password
4. Click **"Authorize"**, then **"Close"**
5. Swagger will automatically obtain the token and use it for all requests

#### Method 2: Manual Token Entry (bearerAuth)

1. First, obtain a token via the `/api/v1/auth/login/` endpoint:
   - Open `/api/v1/auth/login/` in Swagger
   - Click **"Try it out"**
   - Enter `username` and `password` in `application/x-www-form-urlencoded` format
   - Click **"Execute"**
   - Copy the `access` value from the response
2. Click the **"Authorize"** button in the top right corner
3. Select **"bearerAuth"**
4. Paste the token (without the "Bearer" prefix)
5. Click **"Authorize"**, then **"Close"**

### Using Protected Endpoints

After authorization:
- Protected endpoints are marked with a üîí icon
- The token is automatically added to the request headers
- You can execute any operations (GET, POST, PUT, PATCH, DELETE)

### Testing the API via Swagger

1. Select the desired endpoint
2. Click **"Try it out"**
3. Fill in the request parameters (if required)
4. Click **"Execute"**
5. Review:
   - **Response body** ‚Äî the body of the response
   - **Response headers** ‚Äî the headers of the response
   - **Curl** ‚Äî the curl command to repeat the request
   - **Request URL** ‚Äî the full request URL
